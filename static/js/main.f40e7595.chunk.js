(this["webpackJsonpmandal-art"]=this["webpackJsonpmandal-art"]||[]).push([[0],{57:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(0),r=n.n(a),o=n(7),i=n.n(o),s=(n(57),n(30)),u=n(5),d=n(22),l=n(10),h=n.n(l),b=n(18),f=n(12),O=n(13),j=Object({NODE_ENV:"production",PUBLIC_URL:"/mandal-art",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TRELLO_API_KEY:"e6f32668896a013c62bb958df65d0d59",REACT_APP_TRELLO_TOKEN:"1994f828faaa68ad960cf6b50933bfc02a2201de3d1d06f6fde31248dbc78535",REACT_APP_TRELLO_MANDAL_ART_ID:"5fef20e0febcbe541f6444dd",REACT_APP_TRELLO_LIST_ID:"5fef20e8bd17c42cb4b89611"}),p=j.REACT_APP_TRELLO_MANDAL_ART_ID,v=(j.REACT_APP_TRELLO_LIST_ID,j.REACT_APP_TRELLO_CARD_ID,j.REACT_APP_TRELLO_API_KEY),_=n(44),m=n(45),T=new(function(){function e(t,n){Object(_.a)(this,e),this.key=t,this.token=n}return Object(m.a)(e,[{key:"auth",value:function(e){var t=this,n=(e.name||"My App").replace(/ /g,"+"),c=e.expiration||"1hour",a=e.scope||{read:!0,write:!0,account:!1};return new Promise((function(e,r){var o=window.location,i=o.protocol,s=o.host,u=o.pathname,d=o.search,l=window.open("https://trello.com/1/authorize?response_type=token&key=".concat(t.key,"&return_url=").concat(i,"//").concat(s).concat(u).concat(d,"&callback_method=postMessage&scope=").concat(Object.keys(a).filter((function(e){return a[e]})).join(","),"&expiration=").concat(c,"&name=").concat(n),"trello","height=606,width=405,left=".concat(window.screenX+(window.innerWidth-420)/2,",right=").concat(window.screenY+(window.innerHeight-470)/2)),h=setTimeout((function(){l.close(),r(new Error("Trello pop-up closed."))}),6e4),b=setInterval((function(){l.closed&&(clearInterval(b),r(new Error("Trello pop-up closed.")))}),500);window.addEventListener("message",(function(n){"string"===typeof n.data&&(clearTimeout(h),l.close(),t.token=n.data,localStorage.setItem("trello_token",n.data),e())}))}))}},{key:"req",value:function(e,t,n){(n=n||{}).key=this.key,n.token=this.token;var c=new URLSearchParams;for(var a in n)c.append(a,n[a]);var r={method:e},o="https://api.trello.com".concat(t);return"POST"===e||"PUT"===e?(r.body=c.toString(),r.headers={"Content-type":"application/x-www-form-urlencoded"}):o+="?".concat(c.toString()),fetch(o,r).then((function(e){return e.json()}))}},{key:"get",value:function(e,t){return this.req("GET",e,t)}},{key:"head",value:function(e,t){return this.req("HEAD",e,t)}},{key:"post",value:function(e,t){return this.req("POST",e,t)}},{key:"put",value:function(e,t){return this.req("PUT",e,t)}},{key:"delete",value:function(e,t){return this.req("DELETE",e,t)}}]),e}())(v),w=function(e){return Promise.resolve().then((function(){return localStorage.getItem("trello_token")})).then((function(e){if(!e)return T.auth({name:"Mandal-art App",scope:{read:!0,write:!0,account:!0},expiration:"never"});T.token=e,T.key=v})).then((function(){return e()})).catch((function(){}))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T.get("/1/".concat(e),t)},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return E("boards/".concat(e,"/lists/").concat(t))},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return E("boards/".concat(e,"/cards/").concat(t))},k=Object(a.createContext)(),L=k.Provider,x=(k.Consumer,function(e){var t=e.children,n=Object(a.useState)([]),r=Object(O.a)(n,2),o=r[0],i=r[1],s=Object(a.useState)([]),u=Object(O.a)(s,2),d=u[0],l=u[1],j=Object(a.useState)([]),v=Object(O.a)(j,2),_=v[0],m=v[1],T=Object(a.useState)([]),k=Object(O.a)(T,2),x=k[0],g=k[1],S=Object(a.useState)([]),R=Object(O.a)(S,2),y=R[0],C=R[1],D=Object(a.useState)([]),I=Object(O.a)(D,2),N=I[0],q=I[1];return Object(a.useEffect)((function(){Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().then(Object(f.a)(h.a.mark((function e(){var t,n,c,a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p);case 2:return t=e.sent,g(t),n=t.reduce((function(e,t){return[].concat(Object(b.a)(e),[t.name])}),[]),i(Object(b.a)(n)),e.next=8,E("boards/".concat(p,"/labels"),{limit:100});case 8:return c=e.sent,q(c),a=c.reduce((function(e,t){return[].concat(Object(b.a)(e),[t.name])}),[]),m(Object(b.a)(a)),e.next=14,P(p);case 14:r=e.sent,C(r),o=r.map((function(e){return{name:e.name,desc:e.desc,due:e.due?e.due.split("T")[0]:"",labels:e.labels.map((function(e){return e.name})).join("/")}})),l(o);case 18:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(c.jsx)(L,{value:{state:{lists:o,cards:d,labels:_,listObjectList:x,labelObjectList:N,cardObjectList:y},actions:{setLabels:m}},children:t})}),g=k,S={path:"/dashboard",url:"/dashboard",description:"Dashboard Page"},R=n(34),y=n(51),C=function(e){var t=e.children,n=e.path,a=Object(y.a)(e,["children","path"]);return Object(c.jsx)(u.b,Object(R.a)(Object(R.a)({path:n},a),{},{children:t}))},D=n(21),I=n(1);function N(){var e=Object(D.a)(["\n  ","\n  padding:20px;\n"]);return N=function(){return e},e}var q=I.c.div(N(),d.b),K=function(){var e=Object(a.useContext)(g).state,t=e.cards,n=e.lists;return Object(c.jsxs)(q,{children:[n.map((function(e){return Object(c.jsx)("div",{children:JSON.stringify(e)},e)})),t.map((function(e){return Object(c.jsx)("div",{children:JSON.stringify(e)},e.name)}))]})};function M(){var e=Object(D.a)(["\n  height: 100%;\n"]);return M=function(){return e},e}var W=I.c.div(M());var H=function(){var e=S;return Object(c.jsx)(x,{children:Object(c.jsx)(s.a,{basename:"/mandal-art",children:Object(c.jsxs)(W,{children:[Object(c.jsx)(d.a,{}),Object(c.jsxs)(u.d,{children:[Object(c.jsx)(C,{path:e.path,children:Object(c.jsx)(K,{})}),Object(c.jsx)(u.a,{to:e.path})]})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[91,1,2]]]);
//# sourceMappingURL=main.f40e7595.chunk.js.map
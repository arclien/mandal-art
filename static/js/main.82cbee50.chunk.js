(this["webpackJsonpmandal-art"]=this["webpackJsonpmandal-art"]||[]).push([[0],{57:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n.n(c),o=n(7),i=n.n(o),s=(n(57),n(16)),u=n(5),d=n(10),l=n(8),b=n.n(l),h=n(15),j=n(12),f=n(33),O=n(22);n(59);O.a.configure();var p={position:"top-center",autoClose:3e3,closeOnClick:!0,pauseOnHover:!0},v=Object({NODE_ENV:"production",PUBLIC_URL:"/mandal-art",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TRELLO_API_KEY:"e6f32668896a013c62bb958df65d0d59",REACT_APP_TRELLO_LIST_ID:"5fef20e8bd17c42cb4b89611",REACT_APP_TRELLO_MANDAL_ART_ID:"5fef20e0febcbe541f6444dd",REACT_APP_TRELLO_TOKEN:"1994f828faaa68ad960cf6b50933bfc02a2201de3d1d06f6fde31248dbc78535"}),x=v.REACT_APP_TRELLO_MANDAL_ART_ID,m=(v.REACT_APP_TRELLO_LIST_ID,v.REACT_APP_TRELLO_CARD_ID,v.REACT_APP_TRELLO_API_KEY),_=n(43),w=n(44),T=new(function(){function e(t,n){Object(_.a)(this,e),this.key=t,this.token=n}return Object(w.a)(e,[{key:"auth",value:function(e){var t=this,n=(e.name||"My App").replace(/ /g,"+"),r=e.expiration||"1hour",c=e.scope||{read:!0,write:!0,account:!1};return new Promise((function(e,a){var o=window.location,i=o.protocol,s=o.host,u=o.pathname,d=o.search,l=window.open("https://trello.com/1/authorize?response_type=token&key=".concat(t.key,"&return_url=").concat(i,"//").concat(s).concat(u).concat(d,"&callback_method=postMessage&scope=").concat(Object.keys(c).filter((function(e){return c[e]})).join(","),"&expiration=").concat(r,"&name=").concat(n),"trello","height=606,width=405,left=".concat(window.screenX+(window.innerWidth-420)/2,",right=").concat(window.screenY+(window.innerHeight-470)/2)),b=setTimeout((function(){l.close(),a(new Error("Trello pop-up closed."))}),6e4),h=setInterval((function(){l.closed&&(clearInterval(h),a(new Error("Trello pop-up closed.")))}),500);window.addEventListener("message",(function(n){"string"===typeof n.data&&(clearTimeout(b),l.close(),t.token=n.data,localStorage.setItem("trello_token",n.data),e())}))}))}},{key:"req",value:function(e,t,n){(n=n||{}).key=this.key,n.token=this.token;var r=new URLSearchParams;for(var c in n)r.append(c,n[c]);var a={method:e},o="https://api.trello.com".concat(t);return"POST"===e||"PUT"===e?(a.body=r.toString(),a.headers={"Content-type":"application/x-www-form-urlencoded"}):o+="?".concat(r.toString()),fetch(o,a).then((function(e){return e.json()}))}},{key:"get",value:function(e,t){return this.req("GET",e,t)}},{key:"head",value:function(e,t){return this.req("HEAD",e,t)}},{key:"post",value:function(e,t){return this.req("POST",e,t)}},{key:"put",value:function(e,t){return this.req("PUT",e,t)}},{key:"delete",value:function(e,t){return this.req("DELETE",e,t)}}]),e}())(m),E=function(e){return Promise.resolve().then((function(){return localStorage.getItem("trello_token")})).then((function(e){if(!e)return T.auth({name:"Mandal-art App",scope:{read:!0,write:!0,account:!0},expiration:"never"});T.token=e,T.key=m})).then((function(){return e()})).catch((function(){}))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T.get("/1/".concat(e),t)},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return g("boards/".concat(e,"/lists/").concat(t))},A=function(e){return g("boards/".concat(e,"/labels"),{limit:100})},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return g("boards/".concat(e,"/cards/").concat(t))},L=Object(c.createContext)(),R=L.Provider,y=(L.Consumer,{boards:[],lists:[],cards:[],labels:[],isAuthorized:!0}),S=function(e){var t=e.children,n=Object(c.useState)(),a=Object(f.a)(n,2),o=a[0],i=a[1],s=Object(c.useState)(Object(j.a)({},y)),u=Object(f.a)(s,2),d=u[0],l=u[1];return Object(c.useEffect)((function(){Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,E().then(Object(h.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(o);case 3:return t=e.sent,e.next=6,P(o);case 6:return n=e.sent,e.next=9,A(o);case 9:r=e.sent,l((function(e){return Object(j.a)(Object(j.a)({},e),{},{lists:t,cards:n,labels:r})})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),l(Object(j.a)(Object(j.a)({},y),{},{isAuthorized:!1})),c="\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc811\uadfc\uc785\ub2c8\ub2e4.",O.a.error(c,Object(j.a)({},p));case 17:case"end":return e.stop()}var c}),e,null,[[0,13]])}))));case 4:case"end":return e.stop()}}),e)})))()}),[o]),Object(r.jsx)(R,{value:{state:{trelloObjects:d},actions:{setBoardId:i}},children:t})},C=L,I={path:"/home",url:"/home",description:"Home Page"},D={path:"/board/:boardId",url:"/board/",description:"Board Page"},B=n(50),z=function(e){var t=e.children,n=e.path,c=Object(B.a)(e,["children","path"]);return Object(r.jsx)(u.b,Object(j.a)(Object(j.a)({path:n},c),{},{children:t}))},H=n(14),M=n(1);function q(){var e=Object(H.a)(["\n  display: flex;\n  width: 100%;\n  flex: 1 1 auto;\n"]);return q=function(){return e},e}function K(){var e=Object(H.a)(["\n  ",";\n"]);return K=function(){return e},e}function W(){var e=Object(H.a)(["\n  margin: 20px;\n"]);return W=function(){return e},e}function N(){var e=Object(H.a)(["\n  ",";\n"]);return N=function(){return e},e}function U(){var e=Object(H.a)(["\n  ",";\n\n  width: 100%;\n  padding: 20px;\n  min-height: 100vh;\n"]);return U=function(){return e},e}var F=M.c.div(U(),Object(d.e)("center","center","column")),Y=M.c.div(N(),Object(d.f)({size:"22px",color:d.g})),J=Object(M.c)(s.b)(W());J.Button=Object(M.c)(d.b)(K(),Object(d.f)({size:"15px",color:d.h}));var G=M.c.div(q()),V=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(F,{children:[Object(r.jsx)(Y,{children:"Mandal Art"}),Object(r.jsx)(J,{to:"/board/".concat(x),children:Object(r.jsx)(J.Button,{theme:"yellow",size:"xlarge",onClick:function(){},children:"Test Board \uc774\ub3d9"})}),Object(r.jsx)(G,{})]})})};function X(){var e=Object(H.a)(["\n  ","\n  padding:20px;\n"]);return X=function(){return e},e}var $=M.c.div(X(),d.d),Q=function(){var e=Object(u.h)().params.boardId,t=Object(u.g)(),n=Object(c.useContext)(C),a=n.state.trelloObjects,o=a.lists,i=a.cards,s=(a.labels,a.isAuthorized),l=n.actions.setBoardId;return Object(c.useEffect)((function(){Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l(e);case 1:case"end":return t.stop()}}),t)})))()}),[e,l]),Object(c.useEffect)((function(){s||t.replace("/home")}),[s,t]),Object(r.jsxs)($,{children:[s&&0===o.length&&Object(r.jsx)(d.c,{}),o.map((function(e){var t=e.id,n=e.name;return Object(r.jsxs)("div",{children:[t," - ",n]},t)})),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),i.map((function(e){var t=e.id,n=e.desc,c=e.idList,a=(e.idLabels,e.name);return Object(r.jsxs)("div",{children:[c," - ",a," - ",n]},t)}))]})};function Z(){var e=Object(H.a)(["\n  min-height: 100vh;\n"]);return Z=function(){return e},e}var ee=M.c.div(Z());var te=function(){var e=I,t=D;return Object(r.jsx)(S,{children:Object(r.jsx)(s.a,{basename:"/mandal-art",children:Object(r.jsxs)(ee,{children:[Object(r.jsx)(d.a,{}),Object(r.jsxs)(u.d,{children:[Object(r.jsx)(z,{path:t.path,children:Object(r.jsx)(Q,{})}),Object(r.jsx)(z,{path:e.path,children:Object(r.jsx)(V,{})}),Object(r.jsx)(u.a,{to:e.path})]})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(te,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[92,1,2]]]);
//# sourceMappingURL=main.82cbee50.chunk.js.map